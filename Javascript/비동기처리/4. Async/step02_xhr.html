<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    //JSON : JavaScript Object Notation
      // 데이터를 문자열의 형태로 주고 받도록 만들어진 표준. javascript에 내장객체로 존재
      // JSON.stringify() : javascript 객체를 JSON 문자열로 변환
      
    const student = {
      name : '이신엽',
      age : 32,
      score : 100
    }
    const json = JSON.stringify(student);
    console.log(json);

      // JSON.parse() : JSON 문자열을 javascript 객체로 변환
    const obj = JSON.parse(json);
    console.log(obj);

      // ※ JSON에서는 ' ' 를 사용하지 않는다. " " 를 사용한다.
      let obj1 = {key : 'value'}; // Parsing 불가
      let obj2 = {key : "value"};
      let obj3 = {"key" : "value"}; // Parsing 가능
      let obj4 = '{"key" : "value"}'; // Parsing 가능
      // ※ JSON에서는 함수를 사용할 수 없다.
      let obj5 = {key : function(){}}; // Parsing 불가
      let obj6 = {key : () => {}}; // Parsing 불가

    
    //XMLHttpRequest : 비동기 통신을 위한 객체
      // XMLHttpRequest 객체를 생성하고, open() 메서드로 요청을 준비한 후, send() 메서드로 요청을 전송
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1');
    xhr.send();  // 비동기 통신을 시작
      // XMLHttpRequest 객체의 readyState 프로퍼티는 요청의 상태를 나타내는 숫자값을 가짐
        // 0 : 초기화되지 않음
        // 1 : open() 메서드 호출됨
        // 2 : send() 메서드 호출됨
        // 3 : 헤더와 상태가 수신됨
        // 4 : 데이터가 완전히 수신됨
    setTimeout(() => {
      console.log(xhr.readyState);
    }, 1000);
      // XMLHttpRequest 객체의 status 프로퍼티는 요청의 결과를 나타내는 숫자값을 가짐
        // 200 : 요청 성공
        // 404 : 요청 실패
    setTimeout(() => {
      console.log(xhr.status);
    }, 1000);
      // XMLHttpRequest 객체의 responseText 프로퍼티는 요청의 결과를 나타내는 문자열을 가짐
    setTimeout(() => {
      console.log(xhr.responseText);
    }, 1000);
      // XMLHttpRequest 객체의 response 프로퍼티는 요청의 결과를 나타내는 객체를 가짐
    setTimeout(() => {
      console.log(xhr.response);
    }, 1000);
      // XMLHttpRequest 객체의 onreadystatechange 프로퍼티는 요청의 상태가 변경될 때마다 호출되는 콜백함수를 가짐
    xhr.onreadystatechange = function() { 
      if(xhr.readyState === xhr.DONE && xhr.status === 200 ) {// 요청이 완료되고, 요청이 성공했을 때
        console.log("요청이 완료되었습니다.");
        console.log(xhr.response);
      }
    }
      //받아온 response를 JSON.parse()를 이용하여 객체로 변환
    xhr.onreadystatechange = function() {
      if(xhr.readyState === xhr.DONE && xhr.status === 200 ) {
        const todos = JSON.parse(xhr.response);
        console.log(todos);
      }
    }
    
      // XMLHttpRequest 객체의 onload 프로퍼티는 요청이 성공했을 때 호출되는 콜백함수를 가짐
    

  </script>
</body>
</html>