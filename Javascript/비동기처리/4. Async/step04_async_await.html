<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
  // async & await : ë¹„ë™ê¸°ë¥¼ ê°„í¸í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë¬¸ë²•. ES8ì— ì¶”ê°€ë¨.
    //I. async : promiseë¥¼ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¬¸ë²•. asyncê°€ ë¶™ì€ í•¨ìˆ˜ëŠ” í•­ìƒ promiseë¥¼ ë°˜í™˜í•¨.
    async function fetchUser() {
      // do network request in 10 secs...
      return 'ellie';
    }
    console.log(fetchUser()); // Promise { 'ellie' }
    
    fetchUser().then(data => console.log); // Promiseê°ì²´ê°€ ë°˜í™˜ë˜ê¸° ë•Œë¬¸ì— í•¨ìˆ˜ì— thenì„ ë¶™ì—¬ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.

    //II. await : asyncê°€ ë¶™ì€ í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ. promiseê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‹¤ìŒ ì½”ë“œë¥¼ ì‹¤í–‰í•¨.
    function delay(ms) { // msë§Œí¼ ê¸°ë‹¤ë¦¬ëŠ” í•¨ìˆ˜
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function getApple() {
      await delay(1000); //í•´ë‹¹ í•¨ìˆ˜ê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼. 
      return 'ğŸ';
    }
      //ë³µìˆ˜ì˜ awaitë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
    async function getBanana() {
      await delay(3000);
      return 'ğŸŒ';
    }

    async function pickFruits() {
      const applePromise = getApple();
      const bananaPromise = getBanana();
      const apple = await applePromise; //awaitì„ ì‚¬ìš©í•˜ë©´ promiseê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼. ì´ ë¶€ë¶„ì´ ë¨¼ì € ì²˜ë¦¬ëœ ë‹¤ìŒ ì•„ë˜ ì½”ë“œê°€ ì‹¤í–‰ë¨. 
      const banana = await bananaPromise;
      return `${apple} + ${banana}`;
    } 
    

  </script>
</body>
</html>